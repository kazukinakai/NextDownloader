# NextDownloader タスク管理

## 現在の主タスク（2025-05-22）

- [x] プロジェクト構造の設定
- [x] Rustコアライブラリの基本実装
- [x] FFIレイヤーの実装
- [x] Flutterアプリケーションの基本UI
- [x] ダウンロード機能の実装（基本部分）
- [x] 設定機能の実装（基本部分）
- [x] Recaptcha対応機能の実装
- [x] テストの実装
- [ ] ビルドスクリプトの整備と動作確認
- [ ] HLS/DASHストリーミングのサポート

## 優先度の高いタスク

1. **ビルドスクリプトの整備と動作確認**
   - Rustライブラリのビルドとリンク
   - Flutter側のビルド設定
   - macOSでの動作確認

2. **HLS/DASHストリーミングのサポート**
   - HLSマニフェストの解析と処理
   - DASHマニフェストの解析と処理
   - セグメントダウンロードの並列処理
   - 進捗表示の最適化

3. **YouTube動画ダウンロードの実装**
   - YouTube動画情報の取得
   - 品質選択機能
   - ダウンロード処理

## 作業中に発見されたタスク

- Rustライブラリのエラーハンドリングの改善
- ダウンロード進捗の更新頻度の最適化
- 大きなファイルのダウンロード時のメモリ使用量の最適化
- FFI層でのメモリリークの防止

## 完了したタスク

- [x] プロジェクト構造の設定（2025-05-21）
- [x] Rustコアライブラリの基本実装（2025-05-21）
- [x] FFIレイヤーの実装（2025-05-21）
- [x] Flutterアプリケーションの基本UI（2025-05-21）
- [x] ダウンロード機能の実装（基本部分）（2025-05-21）
- [x] 設定機能の実装（基本部分）（2025-05-21）
- [x] クリーンアーキテクチャに基づくFlutterアプリケーションの実装（2025-05-21）
- [x] Recaptcha対応機能の実装（2025-05-22）
- [x] テストの実装（2025-05-22）
  - [x] Rustコアライブラリのユニットテスト
  - [x] Flutterアプリケーションのユニットテスト
  - [x] ウィジェットテスト
  - [x] FFI連携の統合テスト

## 将来の課題

- Windows対応
- Linux対応
- モバイル対応（iOS, Android）
- Tauriアプリケーションの実装
- プラグインシステムの実装
- バッチダウンロード機能
- スケジュールダウンロード機能
- クラウド連携機能

## 進行中のタスクの詳細

### ビルドスクリプトの整備と動作確認

**目的**: RustライブラリをFlutterアプリケーションと連携させるためのビルド環境を整備する

**ステップ**:
1. macOS用のRustビルドスクリプトの作成
2. Podfileの更新
3. ビルド設定の調整
4. 動作確認

**課題**:
- ライブラリのパス解決
- 依存関係の管理
- クロスプラットフォームビルドの準備

### HLS/DASHストリーミングのサポート

**目的**: HLSおよびDASHストリーミングプロトコルに対応したダウンロード機能を実装する

**ステップ**:
1. マニフェスト解析機能の実装
2. セグメントダウンロード機能の実装
3. ダウンロード進捗管理の実装
4. 最終メディアファイルの結合処理の実装

**課題**:
- 複雑なマニフェストの解析
- 複数品質の処理
- バンド幅に応じた品質選択
- 再開可能なダウンロード処理

### YouTube動画ダウンロードの実装

**目的**: YouTube動画をダウンロードする機能を実装する

**ステップ**:
1. YouTube動画情報の取得機能実装
2. 品質選択UI実装
3. ダウンロード処理実装
4. 進捗表示の最適化

**課題**:
- YouTube APIの利用制限
- 動画フォーマットの対応
- 著作権保護コンテンツの扱い

### Recaptcha対応機能の実装（完了）

**目的**: Recaptchaを使用している海外アップローダーからのダウンロード機能を実装する

**ステップ**:
1. 認証が必要なサイトの検出機能の実装
2. 外部ブラウザでの認証フローの実装
3. 認証情報を使用したダウンロード処理の実装
4. エラーハンドリングの追加

**課題**:
- 外部ブラウザとの連携
- Cookie情報の管理
- 認証タイムアウトの処理

### テストの実装（完了）

**目的**: アプリケーションの品質と安定性を確保するためのテスト環境を整備する

**ステップ**:
1. Rustのユニットテスト作成
2. Dartのユニットテスト作成
3. FFI連携の統合テスト作成
4. UI/UXテスト作成

**課題**:
- FFI層のテスト方法
- 非同期処理のテスト
- UI状態のテスト